import { Hono } from 'hono'
import { getExploite } from './controller/getExploite'
import { getExploiteDetails } from './controller/getExploiteDetails'
//@ts-ignore
import html from './html/doc.html'
const app = new Hono<{ Bindings: CloudflareBindings }>()

app.get('/', async (c) => {

  const data = await getExploite()

  return c.json({
    data
  })
})

app.get('/details', async (c) => {
    
  const query = c.req.query('id')

  if(!query) return c.json({
    error: "Please provide id"
  })

  const data = await getExploiteDetails(query)

  return c.json<any>({
    data
  })
})

app.get('/doc', async (c) => {
  return c.html(html)
})



export default app